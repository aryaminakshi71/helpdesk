import {
  CompositeStandardLinkPlugin,
  StandardRPCLink,
  toFetchRequest,
  toStandardLazyResponse
} from "./chunk-TU47NT6S.js";
import "./chunk-4MT5BNIL.js";
import {
  intercept,
  toArray
} from "./chunk-FX53GUXJ.js";
import "./chunk-G3PMV62Z.js";

// ../../node_modules/.bun/@orpc+client@1.13.4+460773ef8ff1e07c/node_modules/@orpc/client/dist/adapters/fetch/index.mjs
var CompositeLinkFetchPlugin = class extends CompositeStandardLinkPlugin {
  initRuntimeAdapter(options) {
    for (const plugin of this.plugins) {
      plugin.initRuntimeAdapter?.(options);
    }
  }
};
var LinkFetchClient = class {
  fetch;
  toFetchRequestOptions;
  adapterInterceptors;
  constructor(options) {
    const plugin = new CompositeLinkFetchPlugin(options.plugins);
    plugin.initRuntimeAdapter(options);
    this.fetch = options.fetch ?? globalThis.fetch.bind(globalThis);
    this.toFetchRequestOptions = options;
    this.adapterInterceptors = toArray(options.adapterInterceptors);
  }
  async call(standardRequest, options, path, input) {
    const request = toFetchRequest(standardRequest, this.toFetchRequestOptions);
    const fetchResponse = await intercept(
      this.adapterInterceptors,
      { ...options, request, path, input, init: { redirect: "manual" } },
      ({ request: request2, path: path2, input: input2, init, ...options2 }) => this.fetch(request2, init, options2, path2, input2)
    );
    const lazyResponse = toStandardLazyResponse(fetchResponse, { signal: request.signal });
    return lazyResponse;
  }
};
var RPCLink = class extends StandardRPCLink {
  constructor(options) {
    const linkClient = new LinkFetchClient(options);
    super(linkClient, options);
  }
};
export {
  LinkFetchClient,
  RPCLink
};
//# sourceMappingURL=@orpc_client_fetch.js.map
