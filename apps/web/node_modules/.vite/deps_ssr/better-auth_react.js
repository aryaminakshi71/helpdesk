import {
  createDynamicPathProxy,
  getClientConfig,
  listenKeys
} from "./chunk-U7UIKURI.js";
import "./chunk-UXD3AIJJ.js";
import "./chunk-EMRLOAEI.js";
import {
  capitalizeFirstLetter
} from "./chunk-CN2NBKNI.js";
import {
  require_react
} from "./chunk-XZX37B7A.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// ../../node_modules/.bun/better-auth@1.4.14+d8d708348641e738/node_modules/better-auth/dist/client/react/react-store.mjs
var import_react = __toESM(require_react(), 1);
function useStore(store, options = {}) {
  const snapshotRef = (0, import_react.useRef)(store.get());
  const { keys, deps = [store, keys] } = options;
  const subscribe = (0, import_react.useCallback)((onChange) => {
    const emitChange = (value) => {
      if (snapshotRef.current === value) return;
      snapshotRef.current = value;
      onChange();
    };
    emitChange(store.value);
    if (keys?.length) return listenKeys(store, keys, emitChange);
    return store.listen(emitChange);
  }, deps);
  const get = () => snapshotRef.current;
  return (0, import_react.useSyncExternalStore)(subscribe, get, get);
}

// ../../node_modules/.bun/better-auth@1.4.14+d8d708348641e738/node_modules/better-auth/dist/client/react/index.mjs
function getAtomKey(str) {
  return `use${capitalizeFirstLetter(str)}`;
}
function createAuthClient(options) {
  const { pluginPathMethods, pluginsActions, pluginsAtoms, $fetch, $store, atomListeners } = getClientConfig(options);
  const resolvedHooks = {};
  for (const [key, value] of Object.entries(pluginsAtoms)) resolvedHooks[getAtomKey(key)] = () => useStore(value);
  return createDynamicPathProxy({
    ...pluginsActions,
    ...resolvedHooks,
    $fetch,
    $store
  }, $fetch, pluginPathMethods, pluginsAtoms, atomListeners);
}
export {
  createAuthClient,
  useStore
};
//# sourceMappingURL=better-auth_react.js.map
